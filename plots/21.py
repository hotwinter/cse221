import matplotlib.pyplot as plt
import numpy as np

data = [[15.24, 6.02, 7.49, 6.15, 6.12, 6.18, 6.19, 6.43, 8.41, 8.0, 8.27, 8.41, 8.27, 8.31, 8.22, 8.03], 
        [6.15, 6.02, 6.53, 15.76, 11.78, 11.86, 12.6, 23.76, 37.2, 37.96, 38.65, 38.49, 38.97, 39.07, 39.23, 39.1], 
        [6.17, 6.02, 6.25, 24.77, 15.75, 15.71, 17.13, 28.38, 40.6, 42.82, 44.24, 46.67, 44.84, 45.55, 45.49, 47.2], 
        [6.03, 5.99, 6.05, 6.07, 6.16, 41.61, 46.79, 49.66, 57.13, 71.23, 179.20, 309.93, 418.96, 427.55, 428.43, 414.96],
        [6.1, 5.99, 6.02, 6.58, 6.03, 6.09, 6.14, 6.71, 41.58, 53.6, 93.84, 114.96, 138.75, 275.06, 334.81, 425.81], 
        [5.94, 5.87, 5.91, 5.94, 5.89, 5.97, 5.99, 8.72, 6.85, 7.56, 8.56, 44.57, 88.6, 102.87, 148.52, 279.05], 
        [6.01, 5.84, 5.91, 5.9, 5.92, 5.98, 5.99, 6.35, 6.75, 7.03, 7.2, 8.08, 9.42, 48.56, 89.87, 142.45], 
        [6.06, 5.88, 7.01, 6.44, 5.95, 5.98, 5.99, 6.09, 6.94, 7.17, 7.22, 7.38, 7.56, 8.09, 9.27, 45.39]]

labels = ['4B', '64B', '128B', '64KB', '128KB', '1MB', '4MB', '16MB']
#data = [[17.05, 5.99, 6.95, 41.47, 40.48, 40.23, 41.11, 49.11, 88.81, 211.06, 321.67, 321.74, 323.97, 328.74, 316.87, 370.12], [18.94, 5.99, 6.06, 6.20, 39.88, 40.46, 40.07, 51.39, 59.78, 111.19, 298.10, 432.27, 418.32, 444.59, 427.95, 445.50], [6.03, 5.99, 6.05, 6.07, 6.16, 41.61, 46.79, 49.66, 57.13, 71.23, 179.20, 309.93, 418.96, 427.55, 428.43, 414.96], [6.03, 6.00, 6.08, 6.12, 6.12, 6.17, 6.81, 40.34, 54.14, 55.82, 107.09, 132.41, 186.78, 330.57, 423.53, 417.27]]
#labels = ['4K', '8K', '16K', '64K']
x = []
i = 4096
styles = ['-', '--', '-', '--', '-', '--', '-', '--']
while i <= 128 * 1024 * 1024:
    x.append(i)
    i *= 2

fig, ax = plt.subplots()
ax.set_xscale('symlog', basex=2)

handles = []
for i in range(len(data)):
    handles.append(plt.plot(x, data[i], label=labels[i], linestyle=styles[i % len(styles)])[0])

plt.axvline(x = 64 * 1024, color='r', linestyle='-.')
plt.axvline(x = 2 * 1024 * 1024, color='r', linestyle='-.')
plt.legend(handles=handles, bbox_to_anchor=(1.1, 1))
plt.show()
